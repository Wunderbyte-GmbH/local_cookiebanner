define("local_cookiebanner/init",["exports","core/ajax","local_cookiebanner/db"],(function(_exports,_ajax,_db){var obj;
/**
   * @module local_cookiebanner/init
   * @copyright 2025
   * @license   https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};_exports.init=async(hascookie,templatedata,loggedin)=>{const link=document.getElementById("cookie-settings-link");link&&link.addEventListener("click",(e=>{e.preventDefault(),require(["local_cookiebanner/banner"],(function(banner){banner.showbanner(templatedata,loggedin)}))}));const consent=await(0,_db.getDBItem)("cookie_consent_remember");"settech"===consent&&hascookie&&_ajax.default.call([{methodname:"local_cookiebanner_delete_username_cookie",args:{}}])[0].then((()=>(console.log("Moodle username cookie deleted."),(0,_db.setDBItem)("cookie_consent_remember","settech")))).catch((error=>{console.error("Failed to delete Moodle username cookie:",error)})),"all"===consent&&_ajax.default.call([{methodname:"local_cookiebanner_set_username_cookie",args:{}}])[0].then((()=>(console.log("Moodle username cookie set."),(0,_db.setDBItem)("cookie_consent_remember","setall")))).catch((error=>{console.error("Failed to set Moodle username cookie:",error)})),"tech"===consent&&_ajax.default.call([{methodname:"local_cookiebanner_delete_username_cookie",args:{}}])[0].then((()=>(console.log("Moodle username cookie deleted."),(0,_db.setDBItem)("cookie_consent_remember","settech")))).catch((error=>{console.error("Failed to delete Moodle username cookie:",error)}))}}));

//# sourceMappingURL=init.min.js.map