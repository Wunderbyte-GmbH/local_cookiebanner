define("local_cookiebanner/banner",["exports","core/templates","core/modal_factory","core/str"],(function(_exports,_templates,_modal_factory,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * @module local_cookiebanner/banner
   * @copyright 2024
   * @license   https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=_interopRequireDefault(_templates),_modal_factory=_interopRequireDefault(_modal_factory);_exports.init=(text,showadvanced,advancedtext)=>localStorage.getItem("cookieAccepted")||localStorage.getItem("cookieRejected")?Promise.resolve():_templates.default.render("local_cookiebanner/banner",text,showadvanced).then((_ref=>{var _banner$querySelector,_banner$querySelector2;let[html,js]=_ref;const temp=document.createElement("div");temp.innerHTML=html;const banner=temp.firstElementChild;document.body.appendChild(banner),_templates.default.runTemplateJS(js),null===(_banner$querySelector=banner.querySelector("#cookie-accept"))||void 0===_banner$querySelector||_banner$querySelector.addEventListener("click",(()=>{localStorage.setItem("cookieAccepted","true"),banner.remove()})),null===(_banner$querySelector2=banner.querySelector("#cookie-reject"))||void 0===_banner$querySelector2||_banner$querySelector2.addEventListener("click",(()=>{localStorage.setItem("cookieRejected","true"),banner.remove()}));const settingsButton=banner.querySelector("#cookie-settings");return showadvanced&&settingsButton?settingsButton.addEventListener("click",(()=>{_modal_factory.default.create({title:(0,_str.getString)("modalheader","local_cookiebanner"),body:advancedtext}).then((modal=>{modal.show()})).catch((error=>{console.error("Modal creation failed:",error)}))})):settingsButton&&(settingsButton.style.display="none"),null})).catch((error=>{console.error("Failed to render cookie banner:",error)}))}));

//# sourceMappingURL=banner.min.js.map